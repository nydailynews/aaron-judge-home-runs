<!DOCTYPE html>
<html lang="en">
<head>
    <title>Aaron Judge is a home-run machine by the NY Daily News</title>
    <link rel="icon" type="image/png" href="http://interactive.nydailynews.com/favicons.png">
    <!-- DEFAULT -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <link rel="apple-touch-icon" href="">
    <meta name="format-detection" content="telephone=no"/>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />

    <!-- TITLES-->
    <meta property="og:title" content='Interactive - Aaron Judge: Home Run Machine' />
    <meta name="twitter:title" content='Interactive - Aaron Judge: Home Run Machine'/>

    <!-- DESCRIPTION-->
    <meta name="description" content="Aaron Judge: Home Run Machine" />
    <meta property="og:description" content="Aaron Judge: Home Run Machine" />
    <meta name="twitter:description" content="Aaron Judge: Home Run Machine" />

    <!-- KEYWORD -->
    <meta name="keywords" content="aaron judge,yankees,home runs,daily news" />
    <meta name="news_keywords" content="aaron judge,yankees,home runs,daily news" />

    <!-- LINK -->
    <link rel="canonical" href="http://interactive.nydailynews.com/project/judge-homers/">
    <meta property="og:url" content="http://interactive.nydailynews.com/project/judge-homers" />
    <meta name="twitter:url" content="http://interactive.nydailynews.com/project/judge-homers">

    <!-- THUMBNAIL IMAGE-->
    <meta property="og:image" content="http://interactive.nydailynews.com/project/judge-homers/img/aaron-judge.jpg" />
    <meta name="twitter:image:src" content="http://interactive.nydailynews.com/project/judge-homers/img/aaron-judge.jpg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="662" />

    <!-- PARSELY -->
    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "NewsArticle",
            "headline": "Interactive - Aaron Judge: Home Run Machine",
            "url": "http://interactive.nydailynews.com/project/judge-homers",
            "thumbnailUrl": "http://interactive.nydailynews.com/project/judge-homers/img/aaron-judge.jpg",
            "dateCreated": "2017-07-10T11:00:00Z",
            "articleSection": "Interactive",
            "creator": ["Interactive", "Joe Murphy", "Kelli R. Parker"],
            "keywords": ["interactive","aaron judge", "Yankees", "Sports"]
        }
    </script>
    <!-- NO NEED TO FILL -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:domain" content="http://interactive.nydailynews.com"/>
    <meta name="twitter:site" content="@nydailynews">
    <meta name="decorator" content="responsive" />
    <meta name="nydn_section" content="NY Daily News" />
    <meta name="robots" content="NOARCHIVE" />
    <meta name="msvalidate.01" content="02916AAC0DA8B068EFE01D721E03ED7E" />
    <meta name="p:domain_verify" content="78efe4f5c9935744af497772f68a0ee7" />
    <meta property="fb:app_id" content="107464888913" />
    <meta property="fb:admins" content="1594068001" />
    <meta property="fb:pages" content="268914272540" />
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="NY Daily News" />
    <meta property="article:publisher" content="https://www.facebook.com/NYDailyNews/" />
    <meta name="themeKey" content="nydailynews" />
    <meta name="mapThemeKey" content="responsive" />
    <meta name="urlPrefix" content="" />
    <meta name="staticContentPrefix" content="http://static.localedge.com/" />
    <meta name="searchBinding" content="/search" />
    <meta name="localeCountry" content="US"/>
    <meta name="localeLanguage" content="en" />

    <!-- ADOBE ANALYTICS -->
    <script src="//assets.adobedtm.com/4fc527d6fda921c80e462d11a29deae2e4cf7514/satelliteLib-c91fdc6ac624c6cbcd50250f79786de339793801.js"></script>
    <script src="http://interactive.nydailynews.com/includes/js/vendor/jquery.js"></script>
    <script src="js/lib/three.js"></script>

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,800' rel='stylesheet' type='text/css'>
    <script data-main="http://assets.nydailynews.com/nydn/js/rh.js?r=20170405001" src="http://assets.nydailynews.com/nydn/js/require.js?r=2016LIST" defer></script>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:700|PT+Serif:400,400i" rel="stylesheet">
    <script src="https://use.fontawesome.com/dccaa25f51.js"></script>
   <!--  <link rel="stylesheet" type="text/css" href="http://assets.nydailynews.com/nydn/c/rh.css?r=2016LIST">
    <link rel="stylesheet" type="text/css" href="http://assets.nydailynews.com/nydn/c/ra.css?r=2016LIST"> -->
    <script>
    var nydn = nydn || {
        "section": "NYDailyNews",
        "subsection": "news",
        "template": "article",
        "revision": "201609014009",
        "bidder": { 'contains': function(arg) {} },
        "targetPath": document.location.pathname
    };
    var nydnDO = [ { 
            'title':'xxxAaron Judge: Home Run Machinexxx', 
            'link':'http://interactive.nydailynews.com/project/judge-homers/', 
            'p_type':'interactive', 
            'section':'interactive' } ];
    </script>
    
    <!-- ADS-START -->
    <!-- ads -->
    <script>
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
    (function() {
        var gads = document.createElement('script');
        gads.async = true;
        var useSSL = 'https:' == document.location.protocol;
        gads.src = (useSSL ? 'https:' : 'http:') + '//www.googletagservices.com/tag/js/gpt.js';
        var node = document.getElementsByTagName('script')[0];
        node.parentNode.insertBefore(gads, node);
    })();
    var is_mobile = /Android|webOS|iPhone|iPad|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    var project_ad_tag = 'project';
    </script>
    <script>
    if( !is_mobile ) {
        googletag.cmd.push(function() {
            googletag.defineSlot('/4692832/NYDN/Interactive',  [[728, 90]], 'div-gpt-ad-x101').addService(googletag.pubads())
            .setTargeting("interactive",project_ad_tag)
            .setTargeting("position","x50");
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
        googletag.cmd.push(function() {
            googletag.defineSlot('/4692832/NYDN/Interactive',  [[300, 250]], 'div-gpt-ad-1423507761396-1').addService(googletag.pubads())
            .setTargeting("interactive",project_ad_tag)
            .setTargeting("position","x55");
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
        googletag.cmd.push(function() {
            googletag.defineSlot('/4692832/NYDN/Interactive',  [[300, 250]], 'div-gpt-ad-1423507761396-2').addService(googletag.pubads())
            .setTargeting("interactive",project_ad_tag)
            .setTargeting("position","x55");
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
        googletag.cmd.push(function() {
            googletag.defineSlot('/4692832/NYDN/Interactive',  [[300, 250]], 'div-gpt-ad-1423507761396-3').addService(googletag.pubads())
            .setTargeting("interactive",project_ad_tag)
            .setTargeting("position","x86");
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
    }
    </script>
    <!-- mobile ad -->
    <script>
    if( is_mobile ) {        
        googletag.cmd.push(function() {
            googletag.defineSlot('/4692832/M.NYDN/Interactive', [[320, 50]], 'div-gpt-ad-x101').addService(googletag.pubads())
            .setTargeting("interactive",project_ad_tag)
            .setTargeting("position","x101");
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
        googletag.cmd.push(function() {
            googletag.defineSlot('/4692832/M.NYDN/Interactive', [[300, 250]], 'div-gpt-ad-1423507761396-1').addService(googletag.pubads())
            .setTargeting("interactive",project_ad_tag)
            .setTargeting("position","x35");
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
        googletag.cmd.push(function() {
            googletag.defineSlot('/4692832/M.NYDN/Interactive', [[300, 250]], 'div-gpt-ad-1423507761396-2').addService(googletag.pubads())
            .setTargeting("interactive",project_ad_tag)
            .setTargeting("position","x36");          
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
        googletag.cmd.push(function() {
            googletag.defineSlot('/4692832/M.NYDN/Interactive', [[300, 250]], 'div-gpt-ad-1423507761396-3').addService(googletag.pubads())
            .setTargeting("interactive",project_ad_tag)
            .setTargeting("position","x37");
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
    }
    </script>
    <!-- ADS-END -->

    <script>var nav_params = {section: 'projects', url: 'http://interactive.nydailynews.com/project'};</script>
    <script src="http://interactive.nydailynews.com/library/vendor-nav/vendor-include.js" defer></script>
</head>

<body id="nydailynews" data-section="nydailynews" data-subsection="NY Daily News">
<header id="templateheader"></header>

<!-- START EDITORIAL CONTENT HERE -->

<article>
    <img src="img/aaron-judge.jpg" alt="Aaron Judge">
    <h1>All rise for the Bronx bomber’s blasts</h1>
    <p>
        <strong>Aaron Judge hits the ball deep.</strong> Aaron Judge hits the ball far. The hulking 6-7 Baby Bomber has become the face of the Yankees youth movement and one of the best stories in all of baseball. The pinstriped rookie is belting home runs at a record pace and all eyes are on his every at-bat. The slugging phenom just doesn't hit homers, he absolutely crushes the ball. Follow along as the News tracks each of Judge’s Ruthian blasts.
    </p>
    <hr>
    <div id="field">
        <img src="img/baseball-field-deluxe.png" alt="An illustration of a baseball field">
    </div>

<!-- STATS TABLE STARTS HERE -->

<script src="js/float-header.js"></script>
<script src="js/table-sorter.js"></script>

    <div id="container">
        <div class="stats-text">
            <p id="interface">
                <a href="#" onClick="slugger.play(); return false;" id="play">Play</a>
                <a href="#" onClick="slugger.pause(); return false;" id="pause" class="hide">Pause</a>
                <a href="#" onClick="slugger.restart(); return false;" id="restart" class="hide">Restart</a>
            </p>
            <p>Click a table column to sort by that column.</p>
        </div>
        <table id="homers" class="tablesorter compare">
            <col><col><col><col><col><col>
            <thead>
                <tr>
                    <th><a>Number</a></th>
                    <th><a>Date</a></th>
                    <th><a>Distance</a></th>
                    <th><a>Exit Velocity</a></th>
                    <th><a>Opponent</a></th>
                    <th><a>Count</a></th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

<!-- STATS TABLE END -->

</article>

</div>
</main>
        <!-- CUSTOM CSS GOES HERE-->
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=PT+Serif:700" rel="stylesheet">
        
  </div>  

<div id="ra-bp">
      </div> <section id="rao">  <div id="rao-close"></div> <div id="rao-wrap"></div> </section> 
<div id="r-scripts">
    <div id="parsely-root" style="display: none">
        <span id="parsely-cfg" data-parsely-site="nydailynews.com"></span>
    </div>
    <div class="r-ad">
        <div id="div-gpt-ad-x100">
        </div>
    </div>
</div>
<footer id="templatefooter"></footer>
<script>
function judge_homeruns_callback(data) { slugger.data = data; slugger.load_ani(); }

var slugger = {
    draw_field: function() {},
    play_hit: function() {},
    update_statbox: function() {},
    hits:  [],
    table_row: function(item) {
        // Write a table row's data
        tb = $('#homers tbody');
        var row = '<tr><td>' + item['Home-Run-No.'] + '</td>\n\
    <td>' + item['Date'] + '</td>\n\
    <td>' + item['Distance'] + ' feet</td>\n\
    <td>' + item['Exit-Velocity'] + '</td>\n\
    <td>' + item['Opponent'].replace('-', ' ') + '</td>\n\
    <td>' + item['Count'] + '</td>\n\
</tr>';
        tb.append(row);
    },
    process_hits: function() {
        // Handle the hit information from the spreadsheet.
        // Loop through the data array and populate the hits array with the processed numbers.
        var l = this.data.length;
        var s, r, t;
        for ( i = 0; i < l; i ++ )
        {
            s = +this.data[i]['Exit-Velocity'] * 5280/3600; // Speed off bat (converting mph to fps)
            r = +this.data[i]['Distance']; // distance... not 100% sure if this should be std or true
            t = +this.data[i]['Horizontal-Angle'] - (225); // horizontal angle - 225 to orient the degrees in the chart to our system
            this.hits.push({s:s,r:r,t:t});

            this.table_row(this.data[i]);
        }
        window.maxT = flightTime(this.hits[0]);
        return true;
    },
    play: function() {
        // Start the animation
        if ( typeof playpause === 'undefined' ) animate();
        playpause = 'play';
        $('#play').addClass('hide');
        $('#pause').removeClass('hide');
        $('#restart').addClass('hide');
    },
    pause: function() {
        // Pause the animation
        playpause = 'pause';
        $('#pause').addClass('hide');
        $('#play').removeClass('hide');
    },
    end: function() {
        // End the animation
        playpause = 'pause';
        $('#pause').addClass('hide');
        $('#play').addClass('hide');
        $('#restart').removeClass('hide');
    },
    restart: function() {
        hitIndex = 0;
        this.play();
    },
    load_ani: function() {
        // Called once the data's loaded, this does most of the work.
        this.process_hits();

        // Make the table sortable
        $(".tablesorter").tablesorter();
        var $table = $('.tablesorter');
        var tb_offset = 75;
        if ( is_mobile ) tb_offset = 29;
        $table.floatThead({
            responsiveContainer: function($table){ return $table.closest('.container'); },
            //top: tb_offset
        });
    },
    init: function() {
        // Called on page load.
        $.getJSON('http://interactive.nydailynews.com/chart/output/judge-homeruns.jsonp?callback=?', function() {});
    }
};

var ani = {
    ball_texture: new THREE.TextureLoader().load( "./img/baseball-texture-map.png" ),
    balls: [],
    lines: [],
    make_ball: function() {
        // Return a ball object
        var geometry = new THREE.SphereBufferGeometry( 3, 8, 6 );
        var material = new THREE.MeshBasicMaterial( { overdraw: 0.5, color:0xffffff } );
        var material = new THREE.MeshBasicMaterial( { map:this.ball_texture, overdraw: 0.5, color:0xffffff } );
        var cube = new THREE.Mesh( geometry, material );            
        scene.add( cube );
        return cube;
    },
    make_line: function() {
        // Return a line object
        // Add a line to trace the ball's path.
        var MAX_POINTS = 60;
        geometry = new THREE.BufferGeometry();
        var positions = new Float32Array( MAX_POINTS * 3 );
        geometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3) );
        var drawCount = 0;
        geometry.setDrawRange( 0, drawCount );
        material = new THREE.LineBasicMaterial( { color: 0xff0000, linewidth: 10 } );
        line = new THREE.Line( geometry,  material );
        scene.add( line );
        return line;
    }
};



            var scene = new THREE.Scene();
            var w = $('#field').width();
            var h = $('#field').height();
            $('#field img').remove();
            // That "40" started off "75" when the field was smaller.
            var camera = new THREE.PerspectiveCamera( 40, w/h, 0.1, 1000 );

            var renderer = new THREE.WebGLRenderer({ alpha: true });
            renderer.setClearColor( 0xffffff, 0);
            renderer.setSize( w, h );
            document.getElementById('field').appendChild( renderer.domElement );

            // THE FIELD
            var field = new THREE.Mesh( new THREE.BoxGeometry( 500, 500, 0.1 ), new THREE.MeshBasicMaterial( { color: 0x00ff00 } ) );
            field.position.x = -250;
            field.position.y = -250;
            //scene.add( field );

            // TODO: maybe this can be mouse controlled? Here's roughly 50 feet behind homeplate and 30 feet elevation
            // maybe the camera should be "hit" and look back at home plate?
            camera.position.set(40,40,35);
            camera.up = new THREE.Vector3(0,0,1);
            camera.lookAt(new THREE.Vector3(-70,-70,1));

            var x, y, z, index;
            x = y = z = index = 0;

            ani.balls[0] = ani.make_ball();
            ani.lines[0] = ani.make_line();
            var positions = ani.lines[0].geometry.attributes.position.array;

            var animate = function () {
                if ( typeof playpause !== 'undefined' && playpause === 'pause' ) 
                {
                    ani.balls[hitIndex].rotation.y += 0.08;
                    ani.balls[hitIndex].rotation.x += 0.04;
                    requestAnimationFrame( animate );
                    renderer.render(scene, camera);
                    return false;
                }

                requestAnimationFrame( animate );

                // figure out t (number of seconds into the flight)
                if (t > maxT)
                {
                    // CAPTION FOR PREVIOUS HOME RUN


                    // HANDLE THE NEXT HOME RUN
                    index = 0;
                    t = 0;
                    hitIndex++;
                    ani.balls[hitIndex] = ani.make_ball();
                    ani.lines[hitIndex] = ani.make_line();
                    positions = ani.lines[hitIndex].geometry.attributes.position.array;
                    if (hitIndex == slugger.hits.length)                    
                    {
                        // END THE ANIMATION
                        slugger.end();
                        return false;
                        //hitIndex = 0;
                    }

                    maxT = flightTime(slugger.hits[hitIndex]);

                }
                else
                {
                    t+= 0.04; // seconds since last frame
                    // TODO: figure out the right way to determine this... this should be dynamic
                    // to make the flight time realistic
                }

                var point = coords(slugger.hits[hitIndex], t);

                // BALL
                ani.balls[hitIndex].position.x = point.x;
                ani.balls[hitIndex].position.y = point.y;
                ani.balls[hitIndex].position.z = point.z;
                ani.balls[hitIndex].rotation.y += 0.08;
                ani.balls[hitIndex].rotation.x += 0.04;
                
                // LINE
                positions[ index ] = point.x;
                index += 1;
                positions[ index ] = point.y;
                index += 1;
                positions[ index ] = point.z;
                index += 1;
                ani.lines[hitIndex].geometry.setDrawRange( 0, index );
                ani.lines[hitIndex].geometry.attributes.position.needsUpdate = true;

                /*
                    // here is "from the ball's perspective" 
                    // Would probably look more interesting with a sprite over the field or something that gives
                    // sense of scale/speed.

                    camera.position.set(point.x, point.y, point.z);
                    camera.up = new THREE.Vector3(0,0,1);
                    camera.lookAt(new THREE.Vector3(0,0,0));
                */

                renderer.render(scene, camera);
            };

            // return the total flight time of a hit
            var flightTime = function(hit)
            {
                return (hit.r * Math.sqrt(2))
                    / Math.sqrt(
                        Math.pow(hit.s, 2)
                        + Math.sqrt(
                            Math.pow(hit.s, 4)
                            - 1024*Math.pow(hit.r, 2)
                        )
                    );
            }

            // return the coordinates of the hit at time 't' (seconds)
            var coords = function(hit, t)
            {
                var sSquared = Math.pow(hit.s,2);
                var xyReusable = (
                    Math.sqrt(
                        sSquared + Math.sqrt(
                            Math.pow(hit.s, 4)
                            - 1024*Math.pow(hit.r, 2)
                        )
                    )
                    / Math.sqrt(2)
                );

                return {
                    x: t * Math.cos(toRads(hit.t)) * xyReusable,
                    y: t * Math.sin(toRads(hit.t)) * xyReusable,
                    z: -16 * Math.pow(t,2) + t * (
                        (
                            2 * sSquared * Math.sqrt(sSquared + Math.sqrt(Math.pow(hit.s, 4) - 1024 * Math.pow(hit.r, 2)))
                            - Math.pow(sSquared + Math.sqrt(Math.pow(hit.s, 4) - 1024 * Math.pow(hit.r, 2)), 1.5)
                        )
                        / (32 * hit.r * Math.sqrt(2))
                    )
                };
            }

            var toRads = function(degrees) {
                return degrees * Math.PI / 180;
            }

            var t = 0.0;
            var hitIndex = 0;

slugger.init();
</script>
<style type="text/css">
#field canvas {
    background-image: url('img/baseball-field-deluxe.png');
    background-repeat: no-repeat;
    background-color: #fafafa;
    background-position: center 0;
}
</body>
</html>
